let LightboxJS=function(elem){if(!LightboxJS.isInit){LightboxJS.init();LightboxJS.isInit=true}this.trigger=elem;this.href=elem.getAttribute("href")??elem.dataset.url??null;this.width=elem.dataset.width??1e3;this.height=elem.dataset.height??600;const closeWithOverlayData=elem.dataset.closeWithOverlay??1;this.closeWithOverlay=closeWithOverlayData!==0&&closeWithOverlayData!=="0"&&closeWithOverlayData!=="false";const showBtnCloseData=elem.dataset.showBtnClose??1;this.showBtnClose=showBtnCloseData!==0&&showBtnCloseData!=="0"&&showBtnCloseData!=="false";this.onCloseAction=elem.dataset.onCloseAction??null;if(this.href!=null){const _this=this;this.trigger.addEventListener("click",e=>{e.preventDefault();_this.open()})}else{console.error("[LightboxJS] this element does not contains url information")}LightboxJS.current=this};LightboxJS.init=function(){LightboxJS.el=document.createElement("div");LightboxJS.content=document.createElement("div");LightboxJS.body=document.createElement("div");LightboxJS.spinner=document.createElement("div");LightboxJS.overlay=document.createElement("div");LightboxJS.closebtn=document.createElement("div");LightboxJS.frame=document.createElement("iframe");LightboxJS.closebtn.innerHTML="&times;";LightboxJS.el.classList.add("lightboxjs");LightboxJS.overlay.classList.add("ljs-overlay");LightboxJS.spinner.classList.add("ljs-spinner");LightboxJS.content.classList.add("ljs-content");LightboxJS.closebtn.classList.add("ljs-close");LightboxJS.body.classList.add("ljs-body");LightboxJS.el.appendChild(this.overlay);LightboxJS.el.appendChild(this.closebtn);LightboxJS.el.appendChild(this.spinner);LightboxJS.content.appendChild(this.body);LightboxJS.el.appendChild(this.content);LightboxJS.body.append(this.frame);document.body.appendChild(this.el);LightboxJS.frame.onload=()=>{if(!LightboxJS.isOpen())return;LightboxJS.spinner.classList.remove("ljs-show");LightboxJS.content.classList.add("ljs-loaded");if(LightboxJS.current.showBtnClose){LightboxJS.closebtn.classList.add("ljs-show");LightboxJS.closebtn.classList.add("ljs-open")}const ff=()=>{LightboxJS.closebtn.classList.remove("ljs-show");LightboxJS.closebtn.removeEventListener("webkitAnimationEnd",ff,false);LightboxJS.closebtn.removeEventListener("mozAnimationEnd",ff,false);LightboxJS.closebtn.removeEventListener("msAnimationEnd",ff,false);LightboxJS.closebtn.removeEventListener("animationend",ff,false)};LightboxJS.closebtn.addEventListener("webkitAnimationEnd",ff,false);LightboxJS.closebtn.addEventListener("mozAnimationEnd",ff,false);LightboxJS.closebtn.addEventListener("msAnimationEnd",ff,false);LightboxJS.closebtn.addEventListener("animationend",ff,false)};const closeWithOverlay=()=>{if(LightboxJS.current.closeWithOverlay)LightboxJS.close()};const closeWithBtn=()=>{LightboxJS.close()};const f=()=>{if(LightboxJS.isOpen())return;LightboxJS.frame.src="about:blank";LightboxJS.el.classList.remove("ljs-show");LightboxJS.closebtn.classList.remove("ljs-show");LightboxJS.closebtn.classList.remove("ljs-open")};LightboxJS.overlay.addEventListener("click",closeWithOverlay);LightboxJS.closebtn.addEventListener("click",closeWithBtn);window.addEventListener("message",event=>{if(event.data==="lightboxjs-close-me")LightboxJS.close()},false);this.el.addEventListener("transitionend",f,false);this.el.addEventListener("webkitTransitionEnd",f,false);this.el.addEventListener("mozTransitionEnd",f,false);this.el.addEventListener("msTransitionEnd",f,false)};LightboxJS.stadalone=null;LightboxJS.onCloseAction=null;LightboxJS.openUrl=function(urlOrParams,width=1e3,height=600,closeWithOverlay=true,showBtnClose=true,onCloseAction=null){if(!LightboxJS.isInit){LightboxJS.init();LightboxJS.isInit=true}let url=urlOrParams;if((urlOrParams.url??null)!=null){url=urlOrParams.url;width=urlOrParams.width??1e3;height=urlOrParams.height??600;closeWithOverlay=urlOrParams.closeWithOverlay??true;showBtnClose=urlOrParams.showBtnClose??true;onCloseAction=urlOrParams.onCloseAction??null}console.log("openURL: ",url,urlOrParams);if(LightboxJS.stadalone==null){let itm=document.createElement("div");itm.dataset.url="to-be-defined-later";itm.style.display="none";document.body.appendChild(itm);LightboxJS.stadalone=new LightboxJS(itm)}LightboxJS.stadalone.href=url;LightboxJS.stadalone.width=width;LightboxJS.stadalone.height=height;LightboxJS.stadalone.closeWithOverlay=closeWithOverlay;LightboxJS.stadalone.showBtnClose=showBtnClose;LightboxJS.stadalone.onCloseAction=onCloseAction;LightboxJS.stadalone.open()};LightboxJS.loadIframe=function(href){LightboxJS.spinner.classList.add("ljs-show");LightboxJS.content.classList.remove("ljs-loaded");LightboxJS.closebtn.classList.remove("ljs-show");LightboxJS.closebtn.classList.remove("ljs-open");LightboxJS.frame.src=href};LightboxJS.prototype.open=function(){LightboxJS.setDimensions(this.width,this.height);LightboxJS.loadIframe(this.href);LightboxJS.el.classList.add("ljs-show");LightboxJS.el.offsetHeight;LightboxJS.el.classList.add("ljs-open");if(!this.closeWithOverlay)LightboxJS.overlay.classList.remove("ljs-clickable");else LightboxJS.overlay.classList.add("ljs-clickable");LightboxJS.current=this};LightboxJS.close=function(){if(LightboxJS.isOpen()){const closeAction=LightboxJS.current.onCloseAction??null;if(closeAction!=null)closeAction.apply(LightboxJS.current);const globalCloseAction=LightboxJS.onCloseAction??null;if(globalCloseAction!=null)globalCloseAction.apply(LightboxJS.current);LightboxJS.el.classList.remove("ljs-open")}};LightboxJS.isOpen=function(){return LightboxJS.el.classList.contains("ljs-open")};LightboxJS.setDimensions=function(w,h){LightboxJS.content.style.width=isNaN(w)?w:w+"px";LightboxJS.content.style.height=isNaN(h)?h:h+"px"};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".lightboxjs-link").forEach(el=>{el.lightbox=new LightboxJS(el)})});